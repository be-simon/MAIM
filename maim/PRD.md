
---

# MAIM - 제품 요구 사항 문서 (PRD)

## 1. 개요
**MAIM**은 사용자와 AI(ChatGPT) 간의 대화를 통해 하루의 생각과 경험을 기록하고, 감정을 분석하여 인사이트를 제공하는 **디지털 저널링 웹 서비스**입니다.  
이 서비스는 **JavaScript**(React 혹은 Next.js)와 **Python**(LangChain, Flask/FastAPI 등) 기반으로 개발되며, **OpenAI의 ChatGPT API**를 사용하여 대화를 처리하고 요약/분석 기능을 수행합니다.

---

## 2. 목표
1. **자연스럽고 직관적인 저널링 경험** 제공  
   - 사용자가 부담 없이 편하게 글을 쓰거나 AI의 질문을 통해 자신을 돌아볼 수 있도록 간결하고 직관적인 UI를 제공
2. **사용자의 자아 성찰과 감정 인식 유도**  
   - AI와의 대화를 통해 자신이 느끼는 감정, 생각, 고민을 구체적으로 인식하고 표현하도록 안내
3. **대화 요약 및 감정 키워드 분석으로 유용한 인사이트 제공**  
   - 사용자가 대화를 통해 얻은 깨달음이나 액션 아이템을 손쉽게 다시 확인할 수 있도록 요약 페이지와 액션 아이템 페이지 제공

---

## 3. 주요 기능 및 요구 사항

### 3.1 홈 화면
1. **타이틀 텍스트 애니메이션**  
   - 화면 중앙(혹은 상단)에 배치된 타이틀 텍스트가 **2초 간격**으로 아래 문구 중 하나로 변경됨
     - "오늘은 무슨 일이 있었나요?"
     - "오늘은 무슨 고민이 있었나요?"
   - 해당 애니메이션은 무한 반복.

2. **텍스트 입력 박스**  
   - 디자인: ChatGPT와 유사한 중앙 정렬 텍스트 박스
   - 사용자 입력을 기다리는 상태로, placeholder 문구 예: "여기에 글을 입력하고 Enter 키를 눌러보세요."
   - **Enter** 키 이벤트 또는 입력 박스 오른쪽의 **‘대화 시작’ 버튼** 클릭 이벤트로 대화 인터페이스로 전환
   - 에러 처리:
     - 빈 문자열인 경우: "입력된 내용이 없습니다" 등의 에러 메시지 표시 (선택적)

3. **반응형 디자인**  
   - PC/모바일/태블릿 등 다양한 해상도에서도 UI가 자연스럽게 표시되도록 반응형 구현
   - 핵심 요소: 타이틀(문구 애니메이션), 입력 박스, 버튼

#### 기능 플로우
1. 사용자 홈페이지 접속
2. 타이틀 애니메이션 가동
3. 사용자 입력 박스에 텍스트 작성
4. Enter 또는 ‘대화 시작’ 버튼 클릭 시 대화 화면으로 전환

---

### 3.2 대화 인터페이스
1. **채팅 UI**
   - **메시지 정렬**: AI 답변은 왼쪽, 사용자 메시지는 오른쪽
   - 메시지 박스 스타일: 말풍선(버블) 형태, 시간(타임스탬프) 표시 가능 (선택)

2. **대화 흐름**
   - 사용자의 입력이 발생할 때마다 백엔드(혹은 Python/ChatGPT API)로 요청을 보냄
   - 백엔드에서 ChatGPT API를 호출 후 응답을 받아 UI에 출력
   - 각 메시지는 DB(예: Firestore/PostgreSQL)에 **순서대로** 저장
     - 데이터 스키마 예:
       ```json
       {
         "conversationId": "생성된 UUID 또는 timestamp",
         "messages": [
           {
             "role": "user",
             "content": "사용자 입력 메시지",
             "timestamp": "2025-02-01T10:00:00"
           },
           {
             "role": "assistant",
             "content": "AI 답변 메시지",
             "timestamp": "2025-02-01T10:00:02"
           }
         ],
         "createdAt": "2025-02-01T10:00:00",
         "updatedAt": "2025-02-01T10:05:00",
         ...
       }
       ```

3. **CTA 버튼 (키보드 위)**
   - **왼쪽 버튼**: “질문 뽑기”
     - 클릭 시 DB(혹은 별도 테이블/컬렉션)에 저장된 **랜덤 저널링 프롬프트**를 선택하여 사용자에게 질문
     - 질문 예: "오늘 자신을 가장 기쁘게 했던 일을 이야기해볼까요?"
     - 이를 AI 메시지로 송출 (왼쪽 정렬)
   - **오른쪽 버튼**: “대화 종료”
     - 클릭 시 대화를 종료하고, 요약 페이지로 이동
     - 내부 로직:
       1. 해당 **conversationId**를 바탕으로 대화 요약/분석 요청
       2. 요약 결과가 DB에 저장되면 요약 페이지에 표시

4. **에러 처리**
   - ChatGPT API 호출 실패 시 “AI와 연결이 지연되고 있습니다. 다시 시도해주세요.” 등의 메시지 표시
   - 네트워크 에러 발생 시 로컬 저장소(Local Storage 등)에 임시 저장하여 재전송 시도

#### 기능 플로우
1. 홈 화면에서 메시지 입력 → 대화 인터페이스 진입
2. 사용자 입력 & AI 응답 반복
3. “질문 뽑기” 버튼 클릭 시 랜덤 저널링 질문 출력
4. “대화 종료” 버튼 클릭 시 대화 종료, 요약 페이지로 이동

---

### 3.3 요약 페이지
1. **대화 요약 생성**
   - ChatGPT API에 대화 전문을 전달하고, “요약” 프롬프트를 사용해 요약 텍스트 생성
   - 사용자에게 1~3문단 정도로 간결한 요약을 제공
   - DB 모델 예:
     ```json
     {
       "conversationId": "...",
       "summary": "오늘 대화 요약 내용...",
       "analysis": {
         "emotionKeywords": ["슬픔", "기쁨", ...],
         "insights": [
           "사용자가 스스로 자존감에 대한 고민을 하고 있음",
           "피로 누적이 원인일 가능성이 높음"
         ],
         "actionItems": [
           "주말 동안 충분한 휴식을 취하기",
           "하루 15분간 명상하기"
         ]
       },
       "createdAt": ...,
       "updatedAt": ...
     }
     ```

2. **감정 키워드 추출**
   - ChatGPT API 또는 감정 분석 모델에게 대화 내 주요 감정 단어 혹은 뉘앙스를 추출
   - 예: 긍정 / 부정 / 불안 / 설렘 등

3. **인사이트 및 액션 아이템**
   - 대화 내용을 토대로 행동 지침이나 추천 사항(Action Items) 제시
   - “액션 아이템”은 리스트 형태로 UI에 표시되며, **‘저장’** 버튼 등을 통해 DB에 저장됨
   - 저장 시 액션 아이템 페이지(3.5)에서 확인 가능

4. **UI 구성**
   - **상단**: 대화 요약(텍스트)
   - **중단**: 감정 키워드 / 인사이트
   - **하단**: 액션 아이템 리스트 (체크박스나 버튼을 통해 저장/확인)

5. **페이지 이동**
   - “목록 보기” 버튼: 조회 페이지(3.4)로 이동
   - “액션 아이템 보러 가기” 버튼: 액션 아이템 페이지(3.5)로 이동

#### 기능 플로우
1. 대화 종료 시점에 요약 API 호출
2. 요약, 감정 키워드, 액션 아이템 DB 저장
3. 요약 페이지에서 요약, 감정, 액션 아이템 표시

---

### 3.4 조회 페이지
1. **대화 리스트 UI**
   - 사용자가 진행한 과거 대화를 날짜별로 리스트업
   - 각 대화 클릭 시 해당 대화의 **요약 페이지(3.3)**로 이동
   - 리스트 아이템 예시 표시:
     ```
     [2025-01-01] 대화 #1: "새해 목표"
     [2025-01-02] 대화 #2: "회사 고민"
     [2025-01-03] 대화 #3: "휴가 계획"
     ...
     ```
   - DB 조회:
     - conversations 컬렉션에서 `userId` 기준으로 날짜 내림차순 정렬
     - 요약 정보가 이미 저장되어 있다면 함께 표시(요약 일부 미리보기)

2. **날짜별 필터링**
   - 캘린더 UI 또는 날짜 범위 선택(From ~ To) 가능
   - 특정 날짜(예: 2025-02-01) 선택 시 해당 날짜에 기록된 대화 목록만 표시

3. **상세 보기**
   - 각 목록 아이템을 클릭하면 요약 페이지(3.3)로 이동
   - 필요 시 “전체 대화 보기” 버튼을 추가로 제공할 수도 있음

#### 기능 플로우
1. 사용자 조회 페이지 접속
2. DB에서 사용자 과거 대화 리스트 불러오기
3. 날짜별 필터 혹은 검색
4. 개별 대화 클릭 시 요약 페이지(3.3)로 링크 이동

---

### 3.5 액션 아이템 페이지
1. **액션 아이템 목록**
   - AI가 제공한 액션 아이템들을 모아볼 수 있는 페이지
   - 예: 
     ```
     - "주말 동안 충분한 휴식을 취하기"
     - "하루 15분간 명상하기"
     - "상사와 회사 내 고민 공유하기"
     ```
2. **상태 관리** (완료 / 진행 중 / 보류 등)
   - 사용자는 각 액션 아이템을 체크(완료)하거나 메모를 추가할 수 있음
3. **정렬 및 필터**
   - 날짜(행동 제안 날짜), 대화 제목, 감정 키워드 등으로 필터링 가능
4. **UX 고려 사항**
   - 완료된 액션은 리스트 하단 또는 별도 섹션으로 이동
   - 진행 중 액션을 우선 표시

#### 기능 플로우
1. 액션 아이템 페이지 접속
2. DB에서 `actionItems` 컬렉션(또는 필드) 조회
3. 상태(완료/미완료)나 날짜별로 정렬하여 표시
4. 사용자가 액션 수행 여부 체크

---

## 4. API 및 기술 요구 사항

### 4.1 ChatGPT API 연동

1. **대화 처리**
   - **실시간 응답**: 사용자 입력 -> 백엔드 -> ChatGPT API -> 백엔드 -> 프론트엔드
   - OpenAI API 호출 시 필요한 파라미터:
     - `model`: 예) `gpt-3.5-turbo`
     - `messages`: 대화 문맥(역할:user/assistant)
     - `temperature`, `max_tokens` 등 옵션
   - **LangChain** 연동:
     - LangChain의 ConversationBufferMemory 등을 이용해 이전 대화 히스토리 관리
     - RAG(Retrieval Augmented Generation) 구조로 프롬프트 전에 추가 컨텍스트(저널링 프롬프트 등) 제공

2. **요약 및 감정 분석**  
   - 대화 종료 시 전체 대화를 단일 Prompt로 요약/감정 분석
   - 분석 결과(감정 키워드, 액션 아이템 등)를 JSON 형태로 반환
   - 예시 프롬프트:
     ```
     "사용자와의 대화를 요약해 주세요. 주요 감정, 키워드, 그리고 사용자가 실천할 수 있는 액션 아이템 3개를 제시해주세요."
     ```

3. **에러 처리 및 로깅**
   - API 호출 실패 시 재시도 로직(3~5회) 또는 사용자 알림
   - 요청/응답 로깅: 중요 데이터(대화 내용)를 추적하기 위해 DB에 저장(단, 개인정보 보호 고려)

4. **보안**
   - API Key 보안: 서버 측에서 API Key를 관리, 프론트엔드 노출 금지
   - HTTPS 통신(SSL/TLS) 사용

---

### 4.2 기술 스택

1. **프론트엔드**
   - **React.js** 또는 **Next.js** 기반
   - 스타일링: Tailwind CSS, Styled-Components, MUI 등 중 선택
   - 상태관리: Redux, React Query, 혹은 Context API 등

2. **백엔드**
   - Node.js(Express/Nest.js) 또는 Python(Flask/FastAPI)
   - RAG/메모리/프롬프트 관리를 위해 **LangChain(Python)** 사용 가능
   - 요약 처리 로직은 Python 서버로 분리 구현할 수도 있음

3. **데이터베이스**
   - Firestore 혹은 PostgreSQL (저널링 프롬프트와 대화, 요약 데이터 저장)
   - **테이블/컬렉션 예시**:
     - `users`: 사용자 정보
     - `conversations`: 대화 내용
     - `summaries`: 요약 / 감정 분석 결과
     - `prompts`: 저널링 프롬프트
     - `actionItems`: 액션 아이템

4. **호스팅 & 인프라**
   - **Vercel**: Next.js 프론트엔드 호스팅
   - **Firebase**: Authentication, Firestore
   - **AWS** (EC2 or Lambda) or **Heroku** 등으로 백엔드 Python 서버 호스팅
   - 필요 시 Docker 컨테이너로 배포

5. **CI/CD**
   - GitHub Actions 등으로 자동 배포 파이프라인 구성
   - Merge 시 자동으로 린트/빌드/테스트 후 배포

---

## 5. 사용자 흐름 (User Flow)

1. **홈 화면 진입**  
   1.1 타이틀 문구가 2초 간격으로 교체  
   1.2 사용자 텍스트 입력  
   1.3 Enter 또는 ‘대화 시작’ 버튼 클릭 시 대화 인터페이스로 이동  

2. **대화 진행**  
   2.1 사용자 입력 -> 백엔드 -> ChatGPT -> 사용자에게 실시간 응답  
   2.2 “질문 뽑기” 버튼 시 랜덤 프롬프트 출력  
   2.3 “대화 종료” 버튼 시 대화 정리 후 요약 페이지 이동  

3. **요약 페이지**  
   3.1 요약, 감정 키워드, 액션 아이템 노출  
   3.2 액션 아이템을 선택적으로 저장  

4. **조회 페이지**  
   4.1 날짜별/목록 형태로 과거 대화 열람  
   4.2 특정 대화 클릭 시 요약 페이지로 이동  

5. **액션 아이템 페이지**  
   5.1 AI가 제공한 액션 아이템 모음  
   5.2 체크박스나 상태 관리를 통해 진행도 확인  

---

## 6. 추가 고려 사항

1. **사용자 인증 (옵션)**
   - 소셜 로그인(Google, GitHub 등) 또는 이메일/비밀번호 가입
   - 개인 정보 보호 측면에서 사용자의 대화 데이터는 비공개 저장

2. **모바일 최적화**
   - 모바일 환경에서 텍스트 입력 시 키보드와 CTA 버튼 위치에 맞춰 레이아웃 조정
   - 터치/스와이프 제스처 고려

3. **알림 기능 (옵션)**
   - 사용자가 설정한 시간에 "오늘 저널을 작성해보세요" 등의 푸시 알림 전송(모바일 App 또는 브라우저 푸시 알림)

4. **다국어 지원 (옵션)**
   - 한국어/영어 등 멀티랭귀지 지원 시, ChatGPT API 프롬프트를 해당 언어로 세팅

5. **데이터 보존 기간**
   - 개인정보 정책: 사용자가 원하면 대화 및 요약 삭제 가능
   - 백업 주기(예: 1일 1회) 및 복원 절차 마련

---

## 7. 마일스톤 및 일정 (예시)

| 마일스톤         | 세부 작업                                               | 기간       |
|------------------|--------------------------------------------------------|------------|
| **1. 기획/설계** | - 요구사항 확정, 와이어프레임 및 DB 스키마 정의        | 1주차      |
| **2. UI/UX**     | - 홈, 대화, 요약, 조회, 액션 아이템 페이지 디자인 확정 | 2주차      |
| **3. 백엔드**    | - Node.js/Flask 서버 구축 <br> - ChatGPT API 연동     | 3~4주차    |
| **4. 프론트엔드**| - React/Next.js 페이지 개발 <br> - 상태관리, API 연동  | 3~5주차    |
| **5. 통합 테스트**| - 기능별 E2E 테스트, 버그 수정                          | 5~6주차    |
| **6. 베타 릴리스**| - 소규모 사용자 테스트, 피드백 수렴                     | 7주차      |
| **7. 정식 오픈** | - 버그 수정 및 안정화, 공식 릴리스                     | 8주차 이상 |

---

# 결론

이상으로, **MAIM** 서비스 개발에 필요한 **기능, 흐름, API 연동, 데이터 구조, UI/UX 요구 사항**을 최대한 구체적으로 나열했습니다.  
본 문서를 바탕으로 각 기능별 상세 구현에 착수하면, 기획-디자인-개발-테스트 전 과정을 체계적으로 진행할 수 있습니다.  

- **협업 시**: PRD를 공유하고, 추가 요구 사항이나 변경 사항은 문서에 기록 및 버전 관리를 통해 반영합니다.  
- **테스트 케이스 작성**: 각 기능(홈, 대화, 요약, 조회, 액션 아이템)별로 QA를 진행하여 최종 품질을 검증합니다.  

**MAIM**이 목표대로 “사용자의 하루 생각과 감정을 기록하고 성찰을 돕는 AI 저널링 도구”로 자리잡길 기대합니다.  